<!DOCTYPE html>
<html lang="cn">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Mysql查询"><meta property="og:title" content="Mysql查询" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://hjlarry.github.io/docs/mysql/query/" />

<title>Mysql查询 | Home</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.0379377fb17315c9a560efd4d406aea4535c095a461b220fd9e3d2e9c05550e6.css" integrity="sha256-A3k3f7FzFcmlYO/U1AaupFNcCVpGGyIP2ePS6cBVUOY=">


<script defer src="/cn.search.min.7018d7caef37523c82b63f28c1f169ed320bc9f95808b92ce0fc2e5a8235c0f0.js" integrity="sha256-cBjXyu83UjyCtj8owfFp7TILyflYCLks4PwuWoI1wPA="></script>

<link rel="alternate" type="application/rss+xml" href="https://hjlarry.github.io/docs/mysql/query/index.xml" title="Home" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://hjlarry.github.io/"><img src="/logo.png" alt="Logo" /><span>Home</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="搜索" aria-label="搜索" maxlength="64" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    <ul>
<li><strong>计算机基础</strong>

<ul>
<li><a href="/docs/sicp/hardware/">硬件部分</a></li>
<li><a href="/docs/sicp/software/">软件部分</a></li>
</ul></li>
<li><strong>GO语言</strong>

<ul>
<li><a href="/docs/go/map/">字典</a></li>
<li>闭包</li>
<li><a href="/docs/go/defer/">延迟调用</a></li>
<li><a href="/docs/go/gc/">垃圾回收</a></li>
<li>内存分配</li>
<li><a href="/docs/go/goroutine/">并发调度</a></li>
<li><a href="/docs/go/lock/">锁</a></li>
</ul></li>
<li><strong>Python语言</strong>

<ul>
<li>描述符</li>
</ul></li>
<li><strong>Mysql</strong>

<ul>
<li><a href="/docs/mysql/query/"class=active>查询</a></li>
<li>索引</li>
<li>原理</li>
</ul></li>
<li><strong>其他</strong>

<ul>
<li><a href="/docs/other/tools/">基础系统工具</a></li>
</ul></li>
</ul>





</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>Mysql查询</strong>
</header>

      
<article class="markdown">

<h1 id="mysql常用查询整理">Mysql常用查询整理</h1>

<h2 id="数据准备">数据准备</h2>

<p>1、创建表格:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">student_info</span> (
    number <span style="color:#66d9ef">INT</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
    name <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">5</span>),
    sex <span style="color:#66d9ef">ENUM</span>(<span style="color:#e6db74">&#39;男&#39;</span>, <span style="color:#e6db74">&#39;女&#39;</span>),
    id_number <span style="color:#66d9ef">CHAR</span>(<span style="color:#ae81ff">18</span>),
    department <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">30</span>),
    major <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">30</span>),
    enrollment_time <span style="color:#66d9ef">DATE</span>,
    <span style="color:#66d9ef">UNIQUE</span> <span style="color:#66d9ef">KEY</span> (id_number)
);

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">student_score</span> (
    number <span style="color:#66d9ef">INT</span>,
    subject <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">30</span>),
    score <span style="color:#66d9ef">TINYINT</span>,
    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (number, subject),
    <span style="color:#66d9ef">CONSTRAINT</span> <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span>(number) <span style="color:#66d9ef">REFERENCES</span> <span style="color:#a6e22e">student_info</span>(number)
);</code></pre></div>

<p>2、填充数据:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#a6e22e">student_info</span>(number, name, sex, id_number, department, major, enrollment_time) <span style="color:#66d9ef">VALUES</span>
(<span style="color:#ae81ff">20180101</span>, <span style="color:#e6db74">&#39;杜子腾&#39;</span>, <span style="color:#e6db74">&#39;男&#39;</span>, <span style="color:#e6db74">&#39;158177199901044792&#39;</span>, <span style="color:#e6db74">&#39;计算机学院&#39;</span>, <span style="color:#e6db74">&#39;计算机科学与工程&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>),
(<span style="color:#ae81ff">20180102</span>, <span style="color:#e6db74">&#39;杜琦燕&#39;</span>, <span style="color:#e6db74">&#39;女&#39;</span>, <span style="color:#e6db74">&#39;151008199801178529&#39;</span>, <span style="color:#e6db74">&#39;计算机学院&#39;</span>, <span style="color:#e6db74">&#39;计算机科学与工程&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>),
(<span style="color:#ae81ff">20180103</span>, <span style="color:#e6db74">&#39;范统&#39;</span>, <span style="color:#e6db74">&#39;男&#39;</span>, <span style="color:#e6db74">&#39;17156319980116959X&#39;</span>, <span style="color:#e6db74">&#39;计算机学院&#39;</span>, <span style="color:#e6db74">&#39;软件工程&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>),
(<span style="color:#ae81ff">20180104</span>, <span style="color:#e6db74">&#39;史珍香&#39;</span>, <span style="color:#e6db74">&#39;女&#39;</span>, <span style="color:#e6db74">&#39;141992199701078600&#39;</span>, <span style="color:#e6db74">&#39;计算机学院&#39;</span>, <span style="color:#e6db74">&#39;软件工程&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>),
(<span style="color:#ae81ff">20180105</span>, <span style="color:#e6db74">&#39;范剑&#39;</span>, <span style="color:#e6db74">&#39;男&#39;</span>, <span style="color:#e6db74">&#39;181048199308156368&#39;</span>, <span style="color:#e6db74">&#39;航天学院&#39;</span>, <span style="color:#e6db74">&#39;飞行器设计&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>),
(<span style="color:#ae81ff">20180106</span>, <span style="color:#e6db74">&#39;朱逸群&#39;</span>, <span style="color:#e6db74">&#39;男&#39;</span>, <span style="color:#e6db74">&#39;197995199501078445&#39;</span>, <span style="color:#e6db74">&#39;航天学院&#39;</span>, <span style="color:#e6db74">&#39;电子信息&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>);

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#a6e22e">student_score</span> (number, subject, score) <span style="color:#66d9ef">VALUES</span>
(<span style="color:#ae81ff">20180101</span>, <span style="color:#e6db74">&#39;母猪的产后护理&#39;</span>, <span style="color:#ae81ff">78</span>),
(<span style="color:#ae81ff">20180101</span>, <span style="color:#e6db74">&#39;论萨达姆的战争准备&#39;</span>, <span style="color:#ae81ff">88</span>),
(<span style="color:#ae81ff">20180102</span>, <span style="color:#e6db74">&#39;母猪的产后护理&#39;</span>, <span style="color:#ae81ff">100</span>),
(<span style="color:#ae81ff">20180102</span>, <span style="color:#e6db74">&#39;论萨达姆的战争准备&#39;</span>, <span style="color:#ae81ff">98</span>),
(<span style="color:#ae81ff">20180103</span>, <span style="color:#e6db74">&#39;母猪的产后护理&#39;</span>, <span style="color:#ae81ff">59</span>),
(<span style="color:#ae81ff">20180103</span>, <span style="color:#e6db74">&#39;论萨达姆的战争准备&#39;</span>, <span style="color:#ae81ff">61</span>),
(<span style="color:#ae81ff">20180104</span>, <span style="color:#e6db74">&#39;母猪的产后护理&#39;</span>, <span style="color:#ae81ff">55</span>),
(<span style="color:#ae81ff">20180104</span>, <span style="color:#e6db74">&#39;论萨达姆的战争准备&#39;</span>, <span style="color:#ae81ff">46</span>);</code></pre></div></p>

<p>3、填充结果:</p>

<p><strong>student_info表</strong></p>

<table>
<thead>
<tr>
<th>number</th>
<th>&nbsp;name&nbsp;</th>
<th>sex</th>
<th>id_number</th>
<th>department</th>
<th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;major&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th>enrollment_time</th>
</tr>
</thead>

<tbody>
<tr>
<td>20180101</td>
<td>杜子腾</td>
<td>男</td>
<td>158177199901044792</td>
<td>计算机学院</td>
<td>计算机科学与工程</td>
<td>2018-09-01</td>
</tr>

<tr>
<td>20180102</td>
<td>杜琦燕</td>
<td>女</td>
<td>151008199801178529</td>
<td>计算机学院</td>
<td>计算机科学与工程</td>
<td>2018-09-01</td>
</tr>

<tr>
<td>20180103</td>
<td>范统</td>
<td>男</td>
<td>17156319980116959X</td>
<td>计算机学院</td>
<td>软件工程</td>
<td>2018-09-01</td>
</tr>

<tr>
<td>20180104</td>
<td>史珍香</td>
<td>女</td>
<td>141992199701078600</td>
<td>计算机学院</td>
<td>软件工程</td>
<td>2018-09-01</td>
</tr>

<tr>
<td>20180105</td>
<td>范剑</td>
<td>男</td>
<td>181048199308156368</td>
<td>航天学院</td>
<td>飞行器设计</td>
<td>2018-09-01</td>
</tr>

<tr>
<td>20180106</td>
<td>朱逸群</td>
<td>男</td>
<td>197995199501078445</td>
<td>航天学院</td>
<td>电子信息</td>
<td>2018-09-01</td>
</tr>
</tbody>
</table>

<p><strong>student_score表</strong></p>

<table>
<thead>
<tr>
<th>number</th>
<th>subject</th>
<th>score</th>
</tr>
</thead>

<tbody>
<tr>
<td>20180101</td>
<td>母猪的产后护理</td>
<td>78</td>
</tr>

<tr>
<td>20180101</td>
<td>论萨达姆的战争准备</td>
<td>88</td>
</tr>

<tr>
<td>20180102</td>
<td>母猪的产后护理</td>
<td>100</td>
</tr>

<tr>
<td>20180102</td>
<td>论萨达姆的战争准备</td>
<td>98</td>
</tr>

<tr>
<td>20180103</td>
<td>母猪的产后护理</td>
<td>59</td>
</tr>

<tr>
<td>20180103</td>
<td>论萨达姆的战争准备</td>
<td>61</td>
</tr>

<tr>
<td>20180104</td>
<td>母猪的产后护理</td>
<td>55</td>
</tr>

<tr>
<td>20180104</td>
<td>论萨达姆的战争准备</td>
<td>46</td>
</tr>
</tbody>
</table>

<h2 id="基础查询">基础查询</h2>

<h3 id="别名">别名</h3>

<ul>
<li>方式一:<code>select number as 学号 from student_score</code></li>
<li>方式二:<code>select number 学号 from student_score</code><br /></li>
</ul>

<p>查询结果:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> number <span style="color:#960050;background-color:#1e0010">学号</span> <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+----------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号</span>     <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+</span>
<span style="color:#ae81ff">8</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>多列也可以:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> number <span style="color:#960050;background-color:#1e0010">学号</span>, name <span style="color:#960050;background-color:#1e0010">姓名</span> <span style="color:#66d9ef">from</span> student_info;
<span style="color:#f92672">+----------+-----------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号</span>     <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">姓名</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+</span>
<span style="color:#ae81ff">6</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="去重">去重</h3>

<p>单列去重:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> department <span style="color:#66d9ef">from</span> student_info;
<span style="color:#f92672">+-----------------+</span>
<span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>多列去重:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> department,major <span style="color:#66d9ef">from</span> student_info;
<span style="color:#f92672">+-----------------+--------------------------+</span>
<span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+--------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>               <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>                 <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+--------------------------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="限制查询结果条数">限制查询结果条数</h3>

<p>使用<code>limit 从哪开始，多少条</code>，<code>从哪开始</code>可以省略，省略代表第0行。</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">8</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major           <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div>

<h3 id="排序">排序</h3>

<p>多列排序:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> name <span style="color:#66d9ef">asc</span>, number <span style="color:#66d9ef">desc</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">158177199901044792</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">151008199801178529</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>               <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#ae81ff">6</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> name <span style="color:#66d9ef">desc</span>, number <span style="color:#66d9ef">desc</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>               <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">151008199801178529</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">158177199901044792</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#ae81ff">6</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h2 id="带条件查询">带条件查询</h2>

<h3 id="简单搜索条件">简单搜索条件</h3>

<p>不等于可以使用<code>&lt;&gt;</code>或<code>!=</code> :
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> department <span style="color:#f92672">&lt;&gt;</span> <span style="color:#e6db74">&#39;计算机学院&#39;</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+--------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department   <span style="color:#f92672">|</span> major           <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+--------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>     <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>     <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+--------------+-----------------+-----------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>区间内使用<code>between...and...</code>，不在某区间使用<code>not between...and...</code>:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number <span style="color:#66d9ef">between</span> <span style="color:#ae81ff">20180103</span> <span style="color:#66d9ef">and</span> <span style="color:#ae81ff">20180105</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major           <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">01</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">between</span> <span style="color:#ae81ff">20180103</span> <span style="color:#66d9ef">and</span> <span style="color:#ae81ff">20180105</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">158177199901044792</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">151008199801178529</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="匹配列表中的元素">匹配列表中的元素</h3>

<p>使用<code>in (...)</code>和<code>not in</code>筛选出在某个列表中的记录:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> major <span style="color:#66d9ef">in</span> (<span style="color:#e6db74">&#39;软件工程&#39;</span>,  <span style="color:#e6db74">&#39;电子信息&#39;</span>);
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major        <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">197995199501078445</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>使用<code>is null</code> 和 <code>is not null</code>可筛选出某列是NULL的记录，而不能使用普通的操作符例如等号来进行比较，NULL代表没有值。</p>

<h3 id="多个搜索条件">多个搜索条件</h3>

<p>AND优先级高于OR:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> student_score <span style="color:#66d9ef">WHERE</span> score <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">95</span> <span style="color:#66d9ef">OR</span> score <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">55</span> <span style="color:#66d9ef">AND</span> subject <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;论萨达姆的战争准备&#39;</span>;
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>   <span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">98</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="模糊查询">模糊查询</h3>

<p>使用<code>like</code>和<code>not like</code>进行模糊匹配查询，<code>%</code>代表任意一个字符串，而<code>_</code>代表任意一个字符:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;杜_&#39;</span>;
Empty <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;范_&#39;</span>;
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major           <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>        <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">181048199308156368</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+-----------------+-----------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%杜%&#39;</span>;
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">158177199901044792</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">151008199801178529</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h2 id="函数和表达式">函数和表达式</h2>

<h3 id="表达式">表达式</h3>

<p>可以将表达式放在查询列表中:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> number,subject,score<span style="color:#f92672">+</span><span style="color:#ae81ff">100</span> <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+----------+-----------------------------+-----------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score<span style="color:#f92672">+</span><span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-----------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>       <span style="color:#ae81ff">178</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>       <span style="color:#ae81ff">188</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>       <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>       <span style="color:#ae81ff">198</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>       <span style="color:#ae81ff">159</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>       <span style="color:#ae81ff">161</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>       <span style="color:#ae81ff">155</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>       <span style="color:#ae81ff">146</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-----------+</span>
<span style="color:#ae81ff">8</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>也可以把表达式作为搜索的条件:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> score<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
<span style="color:#f92672">+----------+-----------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject               <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>        <span style="color:#f92672">|</span>    <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------+-------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="文本处理">文本处理</h3>

<p>连接字符串:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">concat</span>(<span style="color:#e6db74">&#39;学号为&#39;</span>,number,<span style="color:#e6db74">&#39;的学生在[&#39;</span>,subject,<span style="color:#e6db74">&#39;]的成绩为&#39;</span>,score) <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+--------------------------------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">concat</span>(<span style="color:#e6db74">&#39;学号为&#39;</span>,number,<span style="color:#e6db74">&#39;的学生在[&#39;</span>,subject,<span style="color:#e6db74">&#39;]的成绩为&#39;</span>,score)            <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180101</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">78</span>                         <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180101</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">88</span>                     <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180102</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">100</span>                        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180102</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">98</span>                     <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180103</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">59</span>                         <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180103</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">61</span>                     <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180104</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">55</span>                         <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号为</span><span style="color:#ae81ff">20180104</span><span style="color:#960050;background-color:#1e0010">的学生在</span>[<span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>]<span style="color:#960050;background-color:#1e0010">的成绩为</span><span style="color:#ae81ff">46</span>                     <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------------------------------------------------+</span>
<span style="color:#ae81ff">8</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>子串:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">substring</span>(number, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">学号尾号</span> <span style="color:#66d9ef">from</span> student_info;
<span style="color:#f92672">+--------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">学号尾号</span>     <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80104</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80102</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80101</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80103</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80105</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">80106</span>        <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------+</span>
<span style="color:#ae81ff">6</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="时间处理函数">时间处理函数</h3>

<p>时间间隔:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">date_add</span>(<span style="color:#e6db74">&#39;2015-01-01 10:20:33&#39;</span>, <span style="color:#66d9ef">interval</span> <span style="color:#ae81ff">2</span> minute);
<span style="color:#f92672">+----------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">date_add</span>(<span style="color:#e6db74">&#39;2015-01-01 10:20:33&#39;</span>, <span style="color:#66d9ef">interval</span> <span style="color:#ae81ff">2</span> minute) <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">2015</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span> <span style="color:#ae81ff">10</span>:<span style="color:#ae81ff">22</span>:<span style="color:#ae81ff">33</span>                                <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------------------------------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>时间格式化:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">date_format</span>(<span style="color:#a6e22e">now</span>(), <span style="color:#e6db74">&#39;%b/%d/%Y %h:%i:%s~%p&#39;</span>);
<span style="color:#f92672">+--------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">date_format</span>(<span style="color:#a6e22e">now</span>(), <span style="color:#e6db74">&#39;%b/%d/%Y %h:%i:%s~%p&#39;</span>) <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">Dec</span><span style="color:#f92672">/</span><span style="color:#ae81ff">02</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2019</span> <span style="color:#ae81ff">04</span>:<span style="color:#ae81ff">57</span>:<span style="color:#ae81ff">31</span><span style="color:#f92672">~</span>PM                    <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="聚集函数">聚集函数</h3>

<p>COUNT用来统计行数
* <code>COUNT(*)</code>统计表中所有的行，包括NULL
* <code>COUNT(列名)</code>统计表中某列的所有行，不包括NULL</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> student_info;
<span style="color:#f92672">+----------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+</span>
<span style="color:#f92672">|</span>        <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">count</span>(<span style="color:#66d9ef">distinct</span> subject) <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+-------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">count</span>(<span style="color:#66d9ef">distinct</span> subject) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-------------------------+</span>
<span style="color:#f92672">|</span>                       <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div>

<p>SUM和AVG:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">sum</span>(score) <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">sum</span>(score) <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span>        <span style="color:#ae81ff">585</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">avg</span>(score) <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> subject<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;论萨达姆的战争准备&#34;</span>;
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">avg</span>(score) <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">73</span>.<span style="color:#ae81ff">2500</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>组合使用:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">成绩记录总数</span>, <span style="color:#a6e22e">max</span>(score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">最高分</span>, <span style="color:#a6e22e">min</span>(score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">最低分</span>,<span style="color:#a6e22e">avg</span>(score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">平均分</span> <span style="color:#66d9ef">from</span> student_score;
<span style="color:#f92672">+--------------------+-----------+-----------+-----------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">成绩记录总数</span>       <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">最高分</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">最低分</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">平均分</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------+-----------+-----------+-----------+</span>
<span style="color:#f92672">|</span>                  <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>       <span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>        <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>   <span style="color:#ae81ff">73</span>.<span style="color:#ae81ff">1250</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------+-----------+-----------+-----------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="隐式类型转换">隐式类型转换</h3>

<p>Mysql会尽量把值转换为表达式中需要的类型，而不是产生错误:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;2&#39;</span>;
<span style="color:#f92672">+---------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;2&#39;</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------+</span>
<span style="color:#f92672">|</span>       <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;23sds&#39;</span><span style="color:#f92672">+</span><span style="color:#ae81ff">17</span>;
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;23sds&#39;</span><span style="color:#f92672">+</span><span style="color:#ae81ff">17</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#f92672">|</span>         <span style="color:#ae81ff">40</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span>, <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">warning</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>但这种转换不能用于存储数据:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#a6e22e">student_score</span>(score,number,subject) <span style="color:#66d9ef">values</span> (<span style="color:#ae81ff">100</span>,<span style="color:#ae81ff">20180101</span>,<span style="color:#ae81ff">300</span>);
Query OK, <span style="color:#ae81ff">1</span> row <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#a6e22e">student_score</span>(score,number,subject) <span style="color:#66d9ef">values</span> (<span style="color:#e6db74">&#39;100&#39;</span>,<span style="color:#ae81ff">20180101</span>,<span style="color:#ae81ff">400</span>);
Query OK, <span style="color:#ae81ff">1</span> row <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#a6e22e">student_score</span>(score,number,subject) <span style="color:#66d9ef">values</span> (<span style="color:#e6db74">&#39;asd&#39;</span>,<span style="color:#ae81ff">20180101</span>,<span style="color:#ae81ff">400</span>);
ERROR <span style="color:#ae81ff">1366</span> (HY000): Incorrect <span style="color:#66d9ef">integer</span> value: <span style="color:#e6db74">&#39;asd&#39;</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">column</span> <span style="color:#e6db74">&#39;score&#39;</span> at row <span style="color:#ae81ff">1</span></code></pre></div></p>

<h2 id="分组查询">分组查询</h2>

<h3 id="基础查询-1">基础查询</h3>

<p>分组就是针对某个列，将该列的值相同的记录分到一个组中:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> subject, <span style="color:#a6e22e">sum</span>(score) <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> subject;
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> <span style="color:#a6e22e">sum</span>(score) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>        <span style="color:#ae81ff">292</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>        <span style="color:#ae81ff">293</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>把非分组列放入查询列表中会引起争议，导致结果不确定:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> subject, <span style="color:#a6e22e">sum</span>(score),number <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> subject;
ERROR <span style="color:#ae81ff">1055</span> (<span style="color:#ae81ff">42000</span>): Expression <span style="color:#75715e">#3 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;student.student_score.number&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span></code></pre></div></p>

<h3 id="分组和过滤条件">分组和过滤条件</h3>

<p>是先过滤出符合条件的数据，在进行分组运算的:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> subject, <span style="color:#a6e22e">sum</span>(score) <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> score<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">70</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> subject;
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> <span style="color:#a6e22e">sum</span>(score) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>        <span style="color:#ae81ff">178</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>        <span style="color:#ae81ff">186</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>也可以分组后，在筛选出合适的分组:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> subject, <span style="color:#a6e22e">sum</span>(score) <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> subject <span style="color:#66d9ef">having</span> <span style="color:#a6e22e">max</span>(score)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">98</span>;
<span style="color:#f92672">+-----------------------+------------+</span>
<span style="color:#f92672">|</span> subject               <span style="color:#f92672">|</span> <span style="color:#a6e22e">sum</span>(score) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------+------------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>        <span style="color:#f92672">|</span>        <span style="color:#ae81ff">292</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------+------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="分组和排序">分组和排序</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> subject, <span style="color:#a6e22e">sum</span>(score) <span style="color:#66d9ef">as</span> sum_s <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> subject <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> sum_s <span style="color:#66d9ef">desc</span>;
<span style="color:#f92672">+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> sum_s <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>   <span style="color:#ae81ff">293</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>   <span style="color:#ae81ff">292</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------+-------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div>

<h3 id="嵌套分组">嵌套分组</h3>

<p>如下例，可先按department分成大组，再按major分为小组:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> department, major, <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> department, major;
<span style="color:#f92672">+-----------------+--------------------------+----------+</span>
<span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+--------------------------+----------+</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">电子信息</span>                 <span style="color:#f92672">|</span>        <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">航天学院</span>        <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">飞行器设计</span>               <span style="color:#f92672">|</span>        <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span>        <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span>        <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------+--------------------------+----------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="注意事项">注意事项</h3>

<ol>
<li>如果分组列中有NULL值，那么NULL会作为一个独立的分组</li>
<li>如果是嵌套分组，聚集函数将作用在最后的分组列上</li>
<li>非分组列不能单独出现在检索列表中(可以被放到聚集函数中)</li>
<li>GROUP BY子句后可以跟随表达式(但不能是聚集函数)</li>
</ol>

<p>简单查询语句中各子句的顺序为:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> [<span style="color:#66d9ef">DISTINCT</span>] <span style="color:#960050;background-color:#1e0010">查询列表</span>
[<span style="color:#66d9ef">FROM</span> <span style="color:#960050;background-color:#1e0010">表名</span>]
[<span style="color:#66d9ef">WHERE</span> <span style="color:#960050;background-color:#1e0010">布尔表达式</span>]
[<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#960050;background-color:#1e0010">分组列表</span> ]
[<span style="color:#66d9ef">HAVING</span> <span style="color:#960050;background-color:#1e0010">分组过滤条件</span>]
[<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#960050;background-color:#1e0010">排序列表</span>]
[<span style="color:#66d9ef">LIMIT</span> <span style="color:#960050;background-color:#1e0010">开始行</span>, <span style="color:#960050;background-color:#1e0010">限制条数</span>]</code></pre></div></p>

<h2 id="子查询">子查询</h2>

<h3 id="标量子查询">标量子查询</h3>

<p>标量子查询单纯的代表一个值，可以作为表达式参与运算或作为搜索条件:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span>(<span style="color:#66d9ef">select</span> number <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;范统&#39;</span>);
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="列子查询">列子查询</h3>

<p>内层查询结果不是一个单独的值，而是一个列:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span>(<span style="color:#66d9ef">select</span> number <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> sex<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;男&#39;</span>);
ERROR <span style="color:#ae81ff">1242</span> (<span style="color:#ae81ff">21000</span>): Subquery returns more than <span style="color:#ae81ff">1</span> row

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> number <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> number <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> sex<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;男&#39;</span>);
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">88</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>而行子查询、表子查询不常用，省略。</p>

<h3 id="exists和相关子查询">EXISTS和相关子查询</h3>

<p>EXISTS和NOT EXISTS单独看很像一个函数，返回查询结果是否为空集:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">exists</span> (<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span><span style="color:#ae81ff">20180101</span>);
<span style="color:#f92672">+-----------------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">exists</span> (<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span><span style="color:#ae81ff">20180101</span>) <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------------------------------------+</span>
<span style="color:#f92672">|</span>                                                         <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+-----------------------------------------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">exists</span> (<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span><span style="color:#ae81ff">20180101</span>);
<span style="color:#f92672">+---------------------------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">exists</span> (<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> number<span style="color:#f92672">=</span><span style="color:#ae81ff">20180101</span>) <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------------------------------------------------------------+</span>
<span style="color:#f92672">|</span>                                                             <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+---------------------------------------------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>之前我们尝试的都是不相关子查询，而相关子查询就是内层查询语句要用到外层查询语句的值，比如我们查学生的基本信息并要求这些学生有成绩的记录:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">exists</span>(<span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> student_score.number<span style="color:#f92672">=</span>student_info.number);
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major                    <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">158177199901044792</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">151008199801178529</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机科学与工程</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>                 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+--------------------+-----------------+--------------------------+-----------------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>这个相关子查询的查询过程是:先执行外层查询获得到student_info表的第一条记录，发现它的number值是20180101。把20180101当作参数传入到子查询，此时子查询的意思是判断student_score表的number字段是否有20180101这个值存在，子查询的结果是该值存在，所以整个EXISTS表达式的值为TRUE，那么student_info表的第一条记录可以被加入到结果集。每条记录依次按这个过程执行。</p>

<p>此外，子查询还可以应用于同一个表，比如我们去查student_score表中分数大于平均分的记录，第一印象可能是如下写法:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> score <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">avg</span>(score);
ERROR <span style="color:#ae81ff">1111</span> (HY000): Invalid <span style="color:#66d9ef">use</span> of <span style="color:#66d9ef">group</span> function</code></pre></div></p>

<p>实际应该使用子查询来实现:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> score <span style="color:#f92672">&gt;</span> (<span style="color:#66d9ef">select</span> <span style="color:#a6e22e">avg</span>(score) <span style="color:#66d9ef">from</span> student_score);
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">88</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>   <span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">98</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div>
因为聚集函数不能用于WHERE子句，可以把上述写法看做是给student_score做了一个副本。</p>

<h2 id="连接查询">连接查询</h2>

<h3 id="基础概念">基础概念</h3>

<p>连接的本质就是将各个表中的记录都拉取出来，依次匹配组合形成一个结果集，也就是笛卡尔积的方式。</p>

<p>我们来看一个示例:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#a6e22e">t1</span>(m1 <span style="color:#66d9ef">int</span>, n1 <span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">1</span>));
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#a6e22e">t2</span>(m2 <span style="color:#66d9ef">int</span>, n2 <span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">1</span>));
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t1 <span style="color:#66d9ef">values</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;a&#39;</span>),(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;b&#39;</span>),(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;c&#39;</span>);
Query OK, <span style="color:#ae81ff">3</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
Records: <span style="color:#ae81ff">3</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span>

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t2 <span style="color:#66d9ef">values</span>(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;a&#39;</span>),(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;b&#39;</span>),(<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;c&#39;</span>);
Query OK, <span style="color:#ae81ff">3</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
Records: <span style="color:#ae81ff">3</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span></code></pre></div></p>

<p>新建了两个表，并各插入了三条数据，那么连接可以这样做:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1,t2;
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m2   <span style="color:#f92672">|</span> n2   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#ae81ff">9</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>使用以下写法连接都是可以的:</p>

<ul>
<li><code>select t1.m1,t1.n1,t2.m2,t2.n2 from t1, t2</code></li>
<li><code>select m1,n1,m2,n2 from t1, t2</code></li>
<li><code>select t1.*,t2.* from t1, t2</code></li>
</ul>

<h3 id="内外连接">内外连接</h3>

<p>现在我们想通过一条语句既查到学生的基本信息，又查到他的成绩信息:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> student_info.number,name,sex,subject,score <span style="color:#66d9ef">from</span> student_info, student_score <span style="color:#66d9ef">where</span> student_info.number <span style="color:#f92672">=</span> student_score.number;
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">88</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>   <span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">98</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">55</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#ae81ff">8</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>这时候我们发现有两个人没有成绩，所以他们没有显示在查询结果中。为了有办法让其显示出，就有了内连接和外连接的概念:</p>

<ul>
<li>内连接就是我们之前使用的，没有匹配的记录则结果不会加入到最后的结果集</li>
<li>对于外连接的两个表，驱动表中的记录即使在被驱动表中没有匹配的记录，也仍然需要加入到结果集</li>
</ul>

<p>而外连接又分为左外连接，即左侧的表为驱动表。右外连接，即右侧的表为驱动表。</p>

<p>此外，WHERE子句不论内外连接，凡是不符合WHERE条件的记录都不会在最后的结果集中。而对于外连接的驱动表，ON可以将被驱动表中找不到记录的对应驱动表记录加入到结果集，内连接中WHERE子句和ON子句是等价的。所以我们一般会把WHERE用于涉及单表的过滤条件，ON用于涉及多表的过滤条件。</p>

<p>外连接的标准语法为: <code>select * from t1 left/right [outer] join t2 on 连接条件 [where 普通过滤条件]</code>，outer和where可省略。</p>

<p>上例中使用外连接的结果为:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> student_info.number,name,sex,subject,score <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> student_score <span style="color:#66d9ef">on</span> student_info.number <span style="color:#f92672">=</span> student_score.number;
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180101</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜子腾</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">88</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>   <span style="color:#ae81ff">100</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180102</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">杜琦燕</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">98</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">55</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180105</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范剑</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>                        <span style="color:#f92672">|</span>  <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180106</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">朱逸群</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>                        <span style="color:#f92672">|</span>  <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------+------+-----------------------------+-------+</span>
<span style="color:#ae81ff">10</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>内连接以下的写法是等价的:</p>

<ul>
<li><code>select * from t1, t2</code></li>
<li><code>select * from t1 join t2</code></li>
<li><code>select * from t1 inner join t2</code></li>
<li><code>select * from t1 cross join t2</code></li>
</ul>

<p>综上，我们总结以下三种连接的结果差异:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1 <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> t2 <span style="color:#66d9ef">on</span> t1.m1<span style="color:#f92672">=</span>t2.m2;
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m2   <span style="color:#f92672">|</span> n2   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1 <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> t2 <span style="color:#66d9ef">on</span> t1.m1<span style="color:#f92672">=</span>t2.m2;
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m2   <span style="color:#f92672">|</span> n2   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1 <span style="color:#66d9ef">right</span> <span style="color:#66d9ef">join</span> t2 <span style="color:#66d9ef">on</span> t1.m1<span style="color:#f92672">=</span>t2.m2;
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m2   <span style="color:#f92672">|</span> n2   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="多表连接">多表连接</h3>

<p>我们可以连接任意数量的表，我们再加入一张表试验:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#a6e22e">t3</span>(m3 <span style="color:#66d9ef">int</span>, n3 <span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">1</span>));
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">07</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> t3 <span style="color:#66d9ef">values</span>(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;a&#39;</span>),(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;b&#39;</span>),(<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;c&#39;</span>);
Query OK, <span style="color:#ae81ff">3</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">01</span> sec)
Records: <span style="color:#ae81ff">3</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span></code></pre></div></p>

<p>我们使用下面的语法查询是等价的:</p>

<ul>
<li><code>select * from t1 inner join t2 inner join t3 where t1.m1=t2.m2 and t2.m2=t3.m3;</code></li>
<li><code>select * from t1 inner join t2 on t1.m1=t2.m2 inner join t3 on t1.m1=t3.m3;</code></li>
</ul>

<p>查询结果:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1 <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> t2 <span style="color:#66d9ef">on</span> t1.m1<span style="color:#f92672">=</span>t2.m2 <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> t3 <span style="color:#66d9ef">on</span> t1.m1<span style="color:#f92672">=</span>t3.m3;
<span style="color:#f92672">+------+------+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m2   <span style="color:#f92672">|</span> n2   <span style="color:#f92672">|</span> m3   <span style="color:#f92672">|</span> n3   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+------+------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div>
也可以用伪代码来描述:</p>

<pre><code>for each_row in t1{
    for each_row in t2 which t1.m1=t2.m2{
        for each_row in t3 which t2.m2=t3.m3{
            add_result(each_row)
        }
    }
}
</code></pre>

<h3 id="自连接">自连接</h3>

<p>我们无法直接自连接，但可以通过别名:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1, t1;
ERROR <span style="color:#ae81ff">1066</span> (<span style="color:#ae81ff">42000</span>): <span style="color:#66d9ef">Not</span> <span style="color:#66d9ef">unique</span> <span style="color:#66d9ef">table</span><span style="color:#f92672">/</span>alias: <span style="color:#e6db74">&#39;t1&#39;</span>
mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1 <span style="color:#66d9ef">as</span> table1, t1 <span style="color:#66d9ef">as</span> table2;
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span> m1   <span style="color:#f92672">|</span> n1   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> a    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> b    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> c    <span style="color:#f92672">|</span>
<span style="color:#f92672">+------+------+------+------+</span>
<span style="color:#ae81ff">9</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<p>而自连接的意义，比如要查询与&rsquo;范统&rsquo;的专业相同的同学:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">as</span> s1, student_info <span style="color:#66d9ef">as</span> s2 <span style="color:#66d9ef">where</span> s1.name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;范统&#39;</span> <span style="color:#66d9ef">and</span> s1.major<span style="color:#f92672">=</span>s2.major;
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+--------------+-----------------+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major        <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> name      <span style="color:#f92672">|</span> sex  <span style="color:#f92672">|</span> id_number          <span style="color:#f92672">|</span> department      <span style="color:#f92672">|</span> major        <span style="color:#f92672">|</span> enrollment_time <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+--------------+-----------------+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">范统</span>   <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">男</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">17156319980116959</span>X <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">史珍香</span>    <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">女</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">141992199701078600</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">计算机学院</span>      <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">软件工程</span>     <span style="color:#f92672">|</span> <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>      <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+--------+------+--------------------+-----------------+--------------+-----------------+----------+-----------+------+--------------------+-----------------+--------------+-----------------+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>

<h3 id="与子查询转换">与子查询转换</h3>

<p>有的需求既可以用连接查询，也可以用子查询:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">where</span> number <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> number <span style="color:#66d9ef">from</span> student_info <span style="color:#66d9ef">where</span> major<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;软件工程&#39;</span>);
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">55</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> s2.<span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> student_score <span style="color:#66d9ef">as</span> s2, student_info <span style="color:#66d9ef">as</span> s1 <span style="color:#66d9ef">where</span> s1.number<span style="color:#f92672">=</span>s2.number <span style="color:#66d9ef">and</span> s1.major<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;软件工程&#39;</span>;
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> number   <span style="color:#f92672">|</span> subject                     <span style="color:#f92672">|</span> score <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">59</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180103</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">61</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">母猪的产后护理</span>              <span style="color:#f92672">|</span>    <span style="color:#ae81ff">55</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">20180104</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">论萨达姆的战争准备</span>          <span style="color:#f92672">|</span>    <span style="color:#ae81ff">46</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+----------+-----------------------------+-------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)</code></pre></div></p>
</article>

      <div class="book-footer justify-between">
  

  
  
  <div>
    
    <a class="flex align-center" href="https://github.com/hjlarry/hjlarry.github.io/commit/ecdbf04b3ae920705a1bf34b61086c2ac82e3935" title='Last modified by hjlarry | December 14, 2019' target="_blank">
      <img src="/svg/calendar.svg" alt="Calendar" />
      <span>December 14, 2019</span>
    </a>
  </div>
  
  

  
  <div>
    <a class="flex align-center" href="https://github.com/hjlarry/hjlarry.github.io/edit/master/content/docs/mysql/query/_index.md" target="_blank">
      <img src="/svg/edit.svg" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>
  

</div>

      
    </div>

    
  

  <aside class="book-toc levels-3 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#mysql常用查询整理">Mysql常用查询整理</a>
<ul>
<li><a href="#数据准备">数据准备</a></li>
<li><a href="#基础查询">基础查询</a>
<ul>
<li><a href="#别名">别名</a></li>
<li><a href="#去重">去重</a></li>
<li><a href="#限制查询结果条数">限制查询结果条数</a></li>
<li><a href="#排序">排序</a></li>
</ul></li>
<li><a href="#带条件查询">带条件查询</a>
<ul>
<li><a href="#简单搜索条件">简单搜索条件</a></li>
<li><a href="#匹配列表中的元素">匹配列表中的元素</a></li>
<li><a href="#多个搜索条件">多个搜索条件</a></li>
<li><a href="#模糊查询">模糊查询</a></li>
</ul></li>
<li><a href="#函数和表达式">函数和表达式</a>
<ul>
<li><a href="#表达式">表达式</a></li>
<li><a href="#文本处理">文本处理</a></li>
<li><a href="#时间处理函数">时间处理函数</a></li>
<li><a href="#聚集函数">聚集函数</a></li>
<li><a href="#隐式类型转换">隐式类型转换</a></li>
</ul></li>
<li><a href="#分组查询">分组查询</a>
<ul>
<li><a href="#基础查询-1">基础查询</a></li>
<li><a href="#分组和过滤条件">分组和过滤条件</a></li>
<li><a href="#分组和排序">分组和排序</a></li>
<li><a href="#嵌套分组">嵌套分组</a></li>
<li><a href="#注意事项">注意事项</a></li>
</ul></li>
<li><a href="#子查询">子查询</a>
<ul>
<li><a href="#标量子查询">标量子查询</a></li>
<li><a href="#列子查询">列子查询</a></li>
<li><a href="#exists和相关子查询">EXISTS和相关子查询</a></li>
</ul></li>
<li><a href="#连接查询">连接查询</a>
<ul>
<li><a href="#基础概念">基础概念</a></li>
<li><a href="#内外连接">内外连接</a></li>
<li><a href="#多表连接">多表连接</a></li>
<li><a href="#自连接">自连接</a></li>
<li><a href="#与子查询转换">与子查询转换</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
</body>

</html>
